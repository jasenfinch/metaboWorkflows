<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>metaboWorkflows • metaboWorkflows</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="metaboWorkflows">
<meta property="og:description" content="metaboWorkflows">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metaboWorkflows</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/metaboWorkflows.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/workflow-customisation.html">Workflow customisation and extension</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jasenfinch/metaboWorkflows/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="metaboWorkflows_files/header-attrs-2.11/header-attrs.js"></script><script src="metaboWorkflows_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="metaboWorkflows_files/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="metaboWorkflows_files/vis-9.1.0/vis-network.min.js"></script><script src="metaboWorkflows_files/visNetwork-binding-2.1.0/visNetwork.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>metaboWorkflows</h1>
                        <h4 class="author">Jasen Finch</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jasenfinch/metaboWorkflows/blob/master/vignettes/metaboWorkflows.Rmd"><code>vignettes/metaboWorkflows.Rmd</code></a></small>
      <div class="hidden name"><code>metaboWorkflows.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Metabolomics encompasses a wide range of techniques that includes mass spectrometry based fingerprinting and profiling. The analysis of this data requires a number of steps that includes spectral processing, data pre-treatment, quality control, data mining and visualisation in order to extract relevant biological information. The goal of <code>metaboWorkflows</code> is to provide project directory templates for a range of mass spectrometry based metabolomic techniques. The generated project template directories can then be easily extended by the user to meet the needs of particular analysis goals.</p>
<p>These project templates utilise a number of tools to promote efficient and reproducible analysis, agnostic of the actual analysis R code. These tools include:</p>
<ul>
<li>
<a href="https://docs.ropensci.org/targets/">targets</a> - an R focused pipeline toolkit for efficiently maintaining reproducible analysis workflows.</li>
<li>
<a href="https://rstudio.github.io/renv/">renv</a> - an R package for project-local R package dependency management for maintaining reproducible R package environments.</li>
<li>
<a href="https://git-scm.com/">git</a> - a widely used, open-source distributed version control system.</li>
<li>
<a href="https://www.docker.com/">docker</a> - enables the containerization of operating system (OS) level environments. This can be used to define reproducible OS environments in which a workflow analysis can be performed.</li>
</ul>
<p>While the use of most of these tools is optional but highly encouraged, it is recommended for the user to at least be familiar with the basic use of <code>targets</code> based pipelines outlined <a href="https://books.ropensci.org/targets/walkthrough.html">here</a>.</p>
<p>There are three steps in using <code>metaboWorkflows</code> to generate a workflow project template directory. These are as follows:</p>
<ul>
<li>
<strong>input</strong> - define the input data source of the workflow</li>
<li>
<strong>define</strong> - define the workflow steps based on the metabolomic technique and project directory structure</li>
<li>
<strong>generate</strong> - generate the workflow project directory</li>
</ul>
<p>This introduction will outline each of these steps, provide an overview of an example workflow project directory and how to execute one of these workflows.</p>
<p>To begin, firstly load the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://jasenfinch.github.io/metaboWorkflows">metaboWorkflows</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'metaboWorkflows'</span>
<span class="co">#&gt; The following object is masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     args</span></code></pre></div>
</div>
<div id="workflow-input" class="section level2">
<h2 class="hasAnchor">
<a href="#workflow-input" class="anchor"></a>Workflow input</h2>
<p>Prior to defining a workflow, the user needs to know what sort of input type the workflow will use. <code>metaboWorkflows</code> currently supports two types: remote data obtained through the use of a <a href="https://jasenfinch.github.io/grover/"><code>grover</code></a> RESTful web API or through providing a vector of .mzML file paths and a <a href="https://tibble.tidyverse.org/"><code>tibble</code></a> of sample information.</p>
<div id="grover-api-input" class="section level3">
<h3 class="hasAnchor">
<a href="#grover-api-input" class="anchor"></a><code>grover</code> API input</h3>
<p>The <a href="https://jasenfinch.github.io/grover/"><code>grover</code></a> R package provides a framework for hosting RESTful web APIs for remote access and conversion of raw metabolomics data to the .mzML format.</p>
<p>This type of input can be declared by providing the host information of the <a href="https://jasenfinch.github.io/grover/"><code>grover</code></a> API to the <code>inputGrover</code> function. Below shows an example for a fictitious <a href="https://jasenfinch.github.io/grover/"><code>grover</code></a> API host.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">workflow_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputGrover.html">inputGrover</a></span><span class="op">(</span>instrument <span class="op">=</span> <span class="st">'An_instrument'</span>,
                              directory <span class="op">=</span> <span class="st">'Experiment_directory'</span>,
                              host <span class="op">=</span> <span class="st">'a.grover.host'</span>,
                              port <span class="op">=</span> <span class="fl">80</span>,
                              auth <span class="op">=</span> <span class="st">'1234'</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">workflow_input</span><span class="op">)</span>
<span class="co">#&gt; Grover API workflow input </span>
<span class="co">#&gt; Instrument: An_instrument </span>
<span class="co">#&gt; Directory: Experiment_directory </span>
<span class="co">#&gt; Host: a.grover.host </span>
<span class="co">#&gt; Port: 80 </span>
<span class="co">#&gt; Authentication: 1234</span></code></pre></div>
</div>
<div id="file-path-input" class="section level3">
<h3 class="hasAnchor">
<a href="#file-path-input" class="anchor"></a>File path input</h3>
<p>If the raw mass spectrometry .mzML format data files are locally available for a sample set, their file paths and a <a href="https://tibble.tidyverse.org/"><code>tibble</code></a> of the sample information can be provided for workflow input.</p>
<p>Below shows an example file path input for the FIE-HRMS fingerprinting data set of <em>Brachypodium distachyon</em> ecotype comparisons available in the <a href="https://aberhrml.github.io/metaboData/"><code>metaboData</code></a> package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">file_paths</span> <span class="op">&lt;-</span> <span class="fu">metaboData</span><span class="fu">::</span><span class="fu"><a href="https://aberHRML.github.io/metaboData//reference/filePaths.html">filePaths</a></span><span class="op">(</span><span class="st">'FIE-HRMS'</span>,<span class="st">'BdistachyonEcotypes'</span><span class="op">)</span>
<span class="va">sample_information</span> <span class="op">&lt;-</span> <span class="fu">metaboData</span><span class="fu">::</span><span class="fu"><a href="https://aberHRML.github.io/metaboData//reference/runinfo.html">runinfo</a></span><span class="op">(</span><span class="st">'FIE-HRMS'</span>,<span class="st">'BdistachyonEcotypes'</span><span class="op">)</span>

<span class="va">workflow_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inputFilePath.html">inputFilePath</a></span><span class="op">(</span><span class="va">file_paths</span>,<span class="va">sample_information</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">workflow_input</span><span class="op">)</span>
<span class="co">#&gt; File path workflow input</span>
<span class="co">#&gt; # files: 68</span></code></pre></div>
<p>This example input will be used throughout the rest of this introduction.</p>
</div>
</div>
<div id="define-a-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#define-a-workflow" class="anchor"></a>Define a workflow</h2>
<p>Workflow definition is simple and requires the input definition outlined in the previous section, the name of the metabolomic technique and the project name.</p>
<p>To return the currently available metabolomic workflow templates, use:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/availableWorkflows.html">availableWorkflows</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "FIE-HRMS fingerprinting" "NSI-HRMS fingerprinting"</span>
<span class="co">#&gt; [3] "RP-LC-HRMS profiling"    "NP-LC-HRMS profiling"   </span>
<span class="co">#&gt; [5] "GC-MS profiling"</span></code></pre></div>
<p>This example will use the <code>FIE-HRMS fingerprinting</code> template and the project will be named <code>Example project</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">workflow_definition</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defineWorkflow.html">defineWorkflow</a></span><span class="op">(</span>
  input <span class="op">=</span> <span class="va">workflow_input</span>,
  workflow <span class="op">=</span> <span class="st">'FIE-HRMS fingerprinting'</span>,
  project_name <span class="op">=</span> <span class="st">'Example project'</span>
<span class="op">)</span></code></pre></div>
<p>Further project template options can also be specified at this point such as the output directory path or the use of <code>renv</code> for R package management. See <code><a href="../reference/defineWorkflow.html">?defineWorkflow</a></code> for more details. Printing the resulting workflow definition will provide information about the defined workflow.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">workflow_definition</span><span class="op">)</span>
<span class="co">#&gt; Workflow:  FIE-HRMS fingerprinting </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Project name: Example project </span>
<span class="co">#&gt; Directory path: . </span>
<span class="co">#&gt; Use renv: TRUE </span>
<span class="co">#&gt; Docker: TRUE </span>
<span class="co">#&gt; GitHub repository: FALSE </span>
<span class="co">#&gt; Private repository: FALSE </span>
<span class="co">#&gt; GitHub Actions: FALSE </span>
<span class="co">#&gt; Force creation: FALSE </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; File path workflow input</span>
<span class="co">#&gt; # files: 68</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # targets: 37</span></code></pre></div>
<p>As shown above, this workflow definition contains 37 targets. These targets are the individual steps in the analysis pipeline. The full workflow graph, showing the relationships between these targets, can be plotted as shown below:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">workflow_definition</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-08ba738c321cad0f7b1d" style="width:700px;height:432.632880098888px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-08ba738c321cad0f7b1d">{"x":{"nodes":{"name":["correlations","plot_TIC","molecular_formula_assignment","export_correlations","correlations_parameters","mzML","plot_supervised_RF","modelling","plot_chromatogram","report","plot_unsupervised_RF","export_correlations_files","summary_model_importance","sample_information_file","export_processed_data","mzML_files","pre_treated","sample_information","export_pre_treated","export_pre_treated_sample_info","plot_PCA","pre_treatment_parameters","export_processed_data_files","plot_fingerprint","plot_centrality_dist","spectral_processing_parameters","summary_model_metrics","summary_assignments","export_modelling_files","plot_explanatory_heatmap","spectral_processed","molecular_formula_assignment_parameters","file_paths_list","assigned_data","summary_processed_features","plot_LDA","export_assignments_files","modelling_parameters","plot_purity_dist","export_modelling","export_assignments","summary_correlations"],"type":["stem","stem","stem","pattern","stem","pattern","stem","stem","stem","stem","stem","stem","stem","stem","pattern","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","pattern","pattern","stem"],"status":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"seconds":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"bytes":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"id":["correlations","plot_TIC","molecular_formula_assignment","export_correlations","correlations_parameters","mzML","plot_supervised_RF","modelling","plot_chromatogram","report","plot_unsupervised_RF","export_correlations_files","summary_model_importance","sample_information_file","export_processed_data","mzML_files","pre_treated","sample_information","export_pre_treated","export_pre_treated_sample_info","plot_PCA","pre_treatment_parameters","export_processed_data_files","plot_fingerprint","plot_centrality_dist","spectral_processing_parameters","summary_model_metrics","summary_assignments","export_modelling_files","plot_explanatory_heatmap","spectral_processed","molecular_formula_assignment_parameters","file_paths_list","assigned_data","summary_processed_features","plot_LDA","export_assignments_files","modelling_parameters","plot_purity_dist","export_modelling","export_assignments","summary_correlations"],"label":["correlations","plot_TIC","molecular_formula_assignment","export_correlations","correlations_parameters","mzML","plot_supervised_RF","modelling","plot_chromatogram","report","plot_unsupervised_RF","export_correlations_files","summary_model_importance","sample_information_file","export_processed_data","mzML_files","pre_treated","sample_information","export_pre_treated","export_pre_treated_sample_info","plot_PCA","pre_treatment_parameters","export_processed_data_files","plot_fingerprint","plot_centrality_dist","spectral_processing_parameters","summary_model_metrics","summary_assignments","export_modelling_files","plot_explanatory_heatmap","spectral_processed","molecular_formula_assignment_parameters","file_paths_list","assigned_data","summary_processed_features","plot_LDA","export_assignments_files","modelling_parameters","plot_purity_dist","export_modelling","export_assignments","summary_correlations"],"level":[10,6,8,12,1,3,8,11,6,13,8,11,12,1,7,2,7,2,8,8,8,6,6,6,6,4,12,9,12,12,5,1,1,9,6,8,9,10,6,13,10,11],"color":["#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac","#94a4ac"],"shape":["dot","dot","dot","square","dot","square","dot","dot","dot","dot","dot","dot","dot","dot","square","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","square","square","dot"]},"edges":{"from":["assigned_data","correlations_parameters","spectral_processed","molecular_formula_assignment_parameters","pre_treated","export_correlations_files","mzML_files","pre_treated","assigned_data","modelling_parameters","spectral_processed","plot_centrality_dist","plot_chromatogram","plot_explanatory_heatmap","plot_fingerprint","plot_LDA","plot_PCA","plot_purity_dist","plot_supervised_RF","plot_TIC","plot_unsupervised_RF","summary_assignments","summary_correlations","summary_model_importance","summary_model_metrics","summary_processed_features","pre_treated","correlations","modelling","export_processed_data_files","file_paths_list","pre_treatment_parameters","spectral_processed","sample_information_file","pre_treated","pre_treated","pre_treated","spectral_processed","spectral_processed","spectral_processed","spectral_processed","mzML","modelling","molecular_formula_assignment","modelling","modelling","mzML","sample_information","spectral_processing_parameters","molecular_formula_assignment","pre_treated","spectral_processed","pre_treated","molecular_formula_assignment","assigned_data","spectral_processed","export_modelling_files","export_assignments_files","correlations"],"to":["correlations","correlations","plot_TIC","molecular_formula_assignment","molecular_formula_assignment","export_correlations","mzML","plot_supervised_RF","modelling","modelling","plot_chromatogram","report","report","report","report","report","report","report","report","report","report","report","report","report","report","report","plot_unsupervised_RF","export_correlations_files","summary_model_importance","export_processed_data","mzML_files","pre_treated","pre_treated","sample_information","export_pre_treated","export_pre_treated_sample_info","plot_PCA","pre_treatment_parameters","export_processed_data_files","plot_fingerprint","plot_centrality_dist","spectral_processing_parameters","summary_model_metrics","summary_assignments","export_modelling_files","plot_explanatory_heatmap","spectral_processed","spectral_processed","spectral_processed","assigned_data","assigned_data","summary_processed_features","plot_LDA","export_assignments_files","modelling_parameters","plot_purity_dist","export_modelling","export_assignments","summary_correlations"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Stem","Pattern"],"shape":["dot","square"],"color":["#899DA4","#899DA4"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script><p>The package also contains functionality for modifying and extending the targets available in the workflow templates. This is outlined in the <a href="customisation.html">Workflow customisation and extension</a> vignette.</p>
</div>
<div id="generate-a-workflow-project-directory" class="section level2">
<h2 class="hasAnchor">
<a href="#generate-a-workflow-project-directory" class="anchor"></a>Generate a workflow project directory</h2>
<p>The final step is the generation of the project directory for the defined workflow.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/generateWorkflow.html">generateWorkflow</a></span><span class="op">(</span><span class="va">workflow_definition</span><span class="op">)</span></code></pre></div>
<p>This will then generate the project directory at the specified directory path. The additional <code>start</code> argument can be used to automatically open the project directory in the RStudio IDE after project generation.</p>
</div>
<div id="the-project-directory" class="section level2">
<h2 class="hasAnchor">
<a href="#the-project-directory" class="anchor"></a>The project directory</h2>
<p>Below shows an overview of the generated <code>Example project</code> project directory:</p>
<pre><code>Example_project/
├── Dockerfile
├── Example_project.Rproj
├── R
│   ├── functions
│   └── utils.R
├── README.md
├── _targets.R
├── data
│   ├── file_paths.txt
│   └── runinfo.csv
├── exports
├── misc
├── renv
│   ├── activate.R
│   ├── library
│   ├── local
│   ├── settings.dcf
│   └── staging
├── renv.lock
├── report
│   └── report.Rmd
└── run.R</code></pre>
<p>The presence of some of these components will be dependent on the defined project options and the input type that was selected in the workflow definition. Here, a brief overview of some of the important components will be given.</p>
<p><code>Dockerfile</code> - This can be used build a suitable docker image from which the workflow can be executed within a containerised OS environment.</p>
<p><code>R/functions</code> - Scripts containing additional functions can be placed here.</p>
<p><code>R/utils.R</code> - This contains any code related to loading packages.</p>
<p><code>_targets.R</code> - This script contains the formal definition of the workflow with the analysis code for each of the target components of the workflow. See <a href="https://books.ropensci.org/targets/walkthrough.html#target-script-file">here</a> for more information about the this file.</p>
<p><code>data</code> - Where workflow input data is stored. The contents of this directory will differ depending on whether a grover API or file path input type has been selected.</p>
<p><code>exports</code> - Any outputs from the workflow will be directed here including the HTML output and any .csv data table outputs.</p>
<p><code>misc</code> - Any miscellaneous scripts and files can be placed here.</p>
<p><code>renv.lock</code> - A lock file used by the <code>renv</code> package to capture the state of the R package library used in the project.</p>
<p><code>report/report.Rmd</code> - An R Markdown report for summarising the workflow results. It’s output will be saved in <code>exports</code>.</p>
<p><code>run.R</code> - An script that can be used to execute the workflow. See the section below for more information.</p>
</div>
<div id="executing-an-analysis-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#executing-an-analysis-workflow" class="anchor"></a>Executing an analysis workflow</h2>
<p>There are a number of ways in which the workflow can be executed after the project directory has been generated. The targets package provides some information on this topic <a href="https://books.ropensci.org/targets/walkthrough.html#run-the-pipeline">here</a>.</p>
<p>The recommended method is through opening the project in the <a href="https://www.rstudio.com/">RStudio IDE</a> and running the workflow as a job using the <a href="https://rstudio.github.io/rstudioapi/"><code>rstudioapi</code></a> package and <code>run.R</code> script as follows:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rstudioapi/man/jobRunScript.html">jobRunScript</a></span><span class="op">(</span><span class="st">'run.R'</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jasen Finch.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
